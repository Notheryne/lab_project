{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programowanie\\\\front\\\\frontend\\\\src\\\\components\\\\Manage.jsx\";\nimport React from 'react';\nimport '../styles/Manage.css';\nimport { MANAGE_PATH, MANAGE_STAT_PATH } from \"../constants/routes\";\nimport Jumbotron from \"react-bootstrap/Jumbotron\";\nimport Row from \"react-bootstrap/Row\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Card from \"react-bootstrap/Card\";\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Modal from \"react-bootstrap/Modal\";\n\nclass Manage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.pushChange = (event, statName) => {\n      event.preventDefault();\n      const newStat = event.target[statName].value;\n      this.props.sendPostRequest(MANAGE_STAT_PATH, {\n        stat_name: statName,\n        value: newStat\n      }).then(response => {\n        this.setState({\n          changeStatus: response.data.message\n        });\n      }).catch(error => {\n        if (error.response.data.message.value) {\n          this.setState({\n            changeStatus: error.response.data.message.value\n          });\n        } else {\n          this.setState({\n            changeStatus: error.response.data.message\n          });\n        }\n      });\n    };\n\n    this.changeableStatRender = (statName, className) => {\n      const statNameToBeRendered = statName.replace('_', ' ');\n      return React.createElement(Accordion, {\n        defaultActiveKey: \"0\",\n        className: className,\n        key: \"changeable-\" + statName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(Accordion.Toggle, {\n        as: Card.Header,\n        eventKey: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"text-capitalize d-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, statNameToBeRendered, \": \"), React.createElement(\"h5\", {\n        className: \"d-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, this.state.accountData[statName]['value']), React.createElement(\"h6\", {\n        className: \"d-inline float-right no-select\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"\\u25BC\")), React.createElement(Accordion.Collapse, {\n        eventKey: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: event => this.pushChange(event, statName),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Row,\n        controlId: \"form-\" + statNameToBeRendered + \"-change\",\n        className: \"mb-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        className: \"text-capitalize\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"New \", statNameToBeRendered), React.createElement(Col, {\n        md: {\n          span: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"username\",\n        name: statName,\n        placeholder: statNameToBeRendered,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: {\n          span: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Button, {\n        block: true,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Change\"))))))));\n    };\n\n    this.renderChangeableStats = className => {\n      return Object.keys(this.state.accountData).map(statName => {\n        if (this.state.accountData[statName]['changeable']) {\n          return this.changeableStatRender(statName, className);\n        } else {\n          return null;\n        }\n      });\n    };\n\n    this.handleShowConfirmationWindow = () => {\n      this.setState({\n        showConfirmationWindow: true\n      });\n    };\n\n    this.handleHideConfirmationWindow = () => {\n      this.setState({\n        showConfirmationWindow: false\n      });\n    };\n\n    this.deleteAccount = () => {\n      this.props.sendDeleteRequest(MANAGE_STAT_PATH).then(response => {\n        window.localStorage.setItem(\"access_token\", null);\n        window.localStorage.setItem(\"refresh_token\", null);\n        this.props.setIsAuthenticated(false);\n      }).catch(error => {\n        console.log(error.response);\n      });\n    };\n\n    this.showConfirmationWindow = () => {\n      return React.createElement(Modal, {\n        show: this.state.showConfirmationWindow,\n        onHide: this.handleHideConfirmationWindow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Confirm account deletion\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Dear \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, this.state.accountData['username']['value']), \", are you sure that you want to remove your account? \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"If you proceed with this, retrieving your account or your progress will not be possible.\")), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.deleteAccount(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Confirm\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleHideConfirmationWindow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Cancel\")));\n    };\n\n    this.state = {\n      isLoading: true,\n      accountData: {},\n      changeStatus: '',\n      email: '',\n      showConfirmationWindow: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.sendGetRequest(MANAGE_PATH).then(response => {\n      this.setState({\n        accountData: response['data']\n      });\n      this.setState({\n        isLoading: false\n      });\n    }).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  render() {\n    const rowClassNameControl = \"ml-auto mr-auto mt-2 mb-2 w-75\";\n\n    if (!this.state.isLoading) {\n      return React.createElement(Jumbotron, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        variant: \"dark\",\n        className: rowClassNameControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Username: \", this.state.accountData['username']['value'])), React.createElement(Alert, {\n        variant: \"dark\",\n        className: rowClassNameControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Account created on \", this.state.accountData['create_day']['value'] + ' (' + this.state.accountData['create_hour']['value'] + ')')), this.renderChangeableStats(rowClassNameControl), React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.handleShowConfirmationWindow(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Delete your account\"), this.showConfirmationWindow(), React.createElement(\"p\", {\n        className: \"pb-0 mb-0 ml-auto mt-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, this.state.changeStatus));\n    } else {\n      return React.createElement(Spinner, {\n        animation: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default Manage;","map":{"version":3,"sources":["D:/Programowanie/front/frontend/src/components/Manage.jsx"],"names":["React","MANAGE_PATH","MANAGE_STAT_PATH","Jumbotron","Row","Alert","Accordion","Card","Form","Col","Button","Spinner","Modal","Manage","Component","constructor","props","pushChange","event","statName","preventDefault","newStat","target","value","sendPostRequest","stat_name","then","response","setState","changeStatus","data","message","catch","error","changeableStatRender","className","statNameToBeRendered","replace","Header","state","accountData","span","renderChangeableStats","Object","keys","map","handleShowConfirmationWindow","showConfirmationWindow","handleHideConfirmationWindow","deleteAccount","sendDeleteRequest","window","localStorage","setItem","setIsAuthenticated","console","log","isLoading","email","componentDidMount","sendGetRequest","render","rowClassNameControl"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../styles/Manage.css';\r\nimport {MANAGE_PATH, MANAGE_STAT_PATH} from \"../constants/routes\";\r\nimport Jumbotron from \"react-bootstrap/Jumbotron\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport Accordion from \"react-bootstrap/Accordion\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\n\r\nclass Manage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: true,\r\n            accountData: {},\r\n            changeStatus: '',\r\n            email: '',\r\n            showConfirmationWindow: false,\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.props.sendGetRequest(MANAGE_PATH)\r\n            .then((response) => {\r\n                this.setState({accountData: response['data']});\r\n                this.setState({isLoading: false});\r\n            }).catch((error) => {\r\n                console.log(error.response);\r\n        })\r\n    }\r\n\r\n    pushChange = (event, statName) => {\r\n        event.preventDefault();\r\n        const newStat = event.target[statName].value;\r\n        this.props.sendPostRequest(MANAGE_STAT_PATH,\r\n            {stat_name: statName, value: newStat})\r\n            .then((response) => {\r\n                this.setState({changeStatus: response.data.message});\r\n            }).catch((error) => {\r\n                if (error.response.data.message.value) {\r\n                    this.setState({changeStatus: error.response.data.message.value})\r\n                } else {\r\n                    this.setState({changeStatus: error.response.data.message});\r\n                }\r\n        })\r\n    };\r\n\r\n    changeableStatRender = (statName, className) => {\r\n        const statNameToBeRendered = statName.replace('_', ' ');\r\n        return (\r\n            <Accordion defaultActiveKey=\"0\" className={className} key={\"changeable-\" + statName}>\r\n                <Card>\r\n                    <Accordion.Toggle as={Card.Header} eventKey=\"0\">\r\n                        <h5 className=\"text-capitalize d-inline\">{statNameToBeRendered}: </h5>\r\n                        <h5 className=\"d-inline\">{this.state.accountData[statName]['value']}</h5>\r\n                        <h6 className=\"d-inline float-right no-select\">&#9660;</h6>\r\n                    </Accordion.Toggle>\r\n                    <Accordion.Collapse eventKey=\"0\">\r\n                        <Card.Body>\r\n                            <Form onSubmit={(event) => this.pushChange(event, statName)}>\r\n                                <Form.Group\r\n                                    as={Row}\r\n                                    controlId={\"form-\" + statNameToBeRendered + \"-change\"}\r\n                                    className=\"mb-0\"\r\n                                >\r\n                                    <Form.Label column className=\"text-capitalize\">\r\n                                        New {statNameToBeRendered}\r\n                                    </Form.Label>\r\n                                    <Col md={{span: 7}}>\r\n                                        <Form.Control type=\"username\" name={statName} placeholder={statNameToBeRendered} />\r\n                                    </Col>\r\n                                    <Col md={{span: 2}}>\r\n                                        <Button block type=\"submit\">\r\n                                            Change\r\n                                        </Button>\r\n                                    </Col>\r\n                                </Form.Group>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Accordion.Collapse>\r\n                </Card>\r\n            </Accordion>\r\n        )\r\n    };\r\n\r\n    renderChangeableStats = (className) => {\r\n        return Object.keys(this.state.accountData).map((statName) => {\r\n            if (this.state.accountData[statName]['changeable']) {\r\n                return this.changeableStatRender(statName, className);\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n    };\r\n\r\n    handleShowConfirmationWindow = () => {this.setState({showConfirmationWindow: true})};\r\n    handleHideConfirmationWindow = () => {this.setState({showConfirmationWindow: false})};\r\n\r\n    deleteAccount = () => {\r\n        this.props.sendDeleteRequest(MANAGE_STAT_PATH)\r\n            .then((response) => {\r\n                window.localStorage.setItem(\"access_token\", null);\r\n                window.localStorage.setItem(\"refresh_token\", null);\r\n                this.props.setIsAuthenticated(false);\r\n            }).catch((error) => {\r\n                console.log(error.response);\r\n        })\r\n    };\r\n\r\n    showConfirmationWindow = () => {\r\n        return (\r\n            <Modal\r\n                show={this.state.showConfirmationWindow}\r\n                onHide={this.handleHideConfirmationWindow}\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Confirm account deletion</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    <p>Dear <strong>{this.state.accountData['username']['value']}</strong>, are you sure that\r\n                        you want to remove your account? </p>\r\n                    <p>If you proceed with this, retrieving your account or your progress will not\r\n                        be possible.</p>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={() => this.deleteAccount()}>\r\n                        Confirm\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={this.handleHideConfirmationWindow}>\r\n                        Cancel\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    };\r\n\r\n    render() {\r\n        const rowClassNameControl = \"ml-auto mr-auto mt-2 mb-2 w-75\";\r\n        if (!this.state.isLoading) {\r\n            return (\r\n                <Jumbotron className=\"text-center\">\r\n                    <Alert variant=\"dark\" className={rowClassNameControl}>\r\n                        <h2>Username: {this.state.accountData['username']['value']}</h2>\r\n                    </Alert>\r\n                        <Alert variant=\"dark\" className={rowClassNameControl}>\r\n                            <h4>Account created on {\r\n                                this.state.accountData['create_day']['value'] + ' (' +\r\n                                this.state.accountData['create_hour']['value'] + ')'\r\n                            }\r\n                            </h4>\r\n                    </Alert>\r\n                    {this.renderChangeableStats(rowClassNameControl)}\r\n                    <Button\r\n                        variant=\"danger\"\r\n                        onClick={() => this.handleShowConfirmationWindow()}\r\n                    >\r\n                        Delete your account\r\n                    </Button>\r\n                    {this.showConfirmationWindow()}\r\n                    <p className=\"pb-0 mb-0 ml-auto mt-auto\">{this.state.changeStatus}</p>\r\n                </Jumbotron>\r\n            );\r\n        } else {\r\n            return (\r\n                <Spinner animation=\"primary\" />\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Manage;"]},"metadata":{},"sourceType":"module"}